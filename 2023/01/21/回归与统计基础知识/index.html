<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>回归与统计基础知识 | 听海浪的声音</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="回归与统计学基本知识回归分析是什么回归分析，就是研究XY相关性的分析。 X，Y，相关性 回归分析要完成的使命：  哪些变量同Y’真的相关，哪些不是 -&gt; 识别重要性变量 哪些相关关系是正的，哪些负 -&gt; 判断相关性的方向 不同变量间的相对重要性 -&gt; 估计权重（回归系数）  回归五式 线性回归 0-1回归 定序回归 计数回归 泊松回归、负二项回归、零膨胀泊松回归等；   生存回归">
<meta property="og:type" content="article">
<meta property="og:title" content="回归与统计基础知识">
<meta property="og:url" content="http://example.com/2023/01/21/%E5%9B%9E%E5%BD%92%E4%B8%8E%E7%BB%9F%E8%AE%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/index.html">
<meta property="og:site_name" content="听海浪的声音">
<meta property="og:description" content="回归与统计学基本知识回归分析是什么回归分析，就是研究XY相关性的分析。 X，Y，相关性 回归分析要完成的使命：  哪些变量同Y’真的相关，哪些不是 -&gt; 识别重要性变量 哪些相关关系是正的，哪些负 -&gt; 判断相关性的方向 不同变量间的相对重要性 -&gt; 估计权重（回归系数）  回归五式 线性回归 0-1回归 定序回归 计数回归 泊松回归、负二项回归、零膨胀泊松回归等；   生存回归">
<meta property="og:locale">
<meta property="article:published_time" content="2023-01-21T06:02:18.000Z">
<meta property="article:modified_time" content="2023-01-21T06:02:45.570Z">
<meta property="article:author" content="Chuntao Tao">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="听海浪的声音" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">听海浪的声音</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">TCT的脚印</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Buscar"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Buscar"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-回归与统计基础知识" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/01/21/%E5%9B%9E%E5%BD%92%E4%B8%8E%E7%BB%9F%E8%AE%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="article-date">
  <time class="dt-published" datetime="2023-01-21T06:02:18.000Z" itemprop="datePublished">2023-01-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      回归与统计基础知识
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="回归与统计学基本知识"><a href="#回归与统计学基本知识" class="headerlink" title="回归与统计学基本知识"></a>回归与统计学基本知识</h1><h2 id="回归分析是什么"><a href="#回归分析是什么" class="headerlink" title="回归分析是什么"></a>回归分析是什么</h2><p>回归分析，就是研究XY相关性的分析。</p>
<p>X，Y，相关性</p>
<p>回归分析要完成的使命：</p>
<ol>
<li>哪些变量同Y’真的相关，哪些不是 -&gt; 识别重要性变量</li>
<li>哪些相关关系是正的，哪些负 -&gt; 判断相关性的方向</li>
<li>不同变量间的相对重要性 -&gt; 估计权重（回归系数）</li>
</ol>
<h2 id="回归五式"><a href="#回归五式" class="headerlink" title="回归五式"></a>回归五式</h2><ol>
<li>线性回归</li>
<li>0-1回归</li>
<li>定序回归</li>
<li>计数回归<ol>
<li>泊松回归、负二项回归、零膨胀泊松回归等；</li>
</ol>
</li>
<li>生存回归<ol>
<li>生存数据回归</li>
<li>Censored Data 截断的数据</li>
<li>Cox等比例风险模型，AFT加速失效模型</li>
</ol>
</li>
</ol>
<h3 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h3><p>$$<br>Y &#x3D; \beta_0 +X \beta+\epsilon<br>$$</p>
<p>估计方法：最小二乘，最小一乘，M-估计</p>
<p>伴随各种估计方法的是各种假设检验方法：beta系数是否为0.</p>
<ul>
<li>F检验，t检验（LSE）</li>
</ul>
<h3 id="逻辑回归"><a href="#逻辑回归" class="headerlink" title="逻辑回归"></a>逻辑回归</h3><p>目标客户是高价值客户的可能性</p>
<p>0-1回归的核心思想：将0-1型数据转化成连续的“可能性”问题<br>$$<br>P &#x3D; \beta_0 +X\beta +\epsilon<br>$$<br>左边[0,1]右边$\infty$<br>$$<br>\log\frac{P}{1-P} &#x3D; \beta_0+X \beta+\epsilon<br>$$</p>
<ul>
<li>Logit (Logistic Regression)</li>
<li>Probit ($\Phi^{-1}(\cdot)$)</li>
</ul>
<ol>
<li><p>逻辑回归的生成过程是以构造性的思想为主</p>
</li>
<li><p>通过逻辑变换将0-1之间的概率转化为正负无穷之间</p>
</li>
<li><p>测算样本Y取值为1的概率</p>
</li>
<li><p>对真实数据而言，Y等于1的可能性无法被观察到</p>
<ol>
<li>P是未知的 -&gt; MLE极大似然估计<br>$$<br>\frac{P}{1-P} &#x3D; \exp(X \beta+\epsilon) \<br>P &#x3D; \frac{1}{1+exp(-z(&#x3D;X\beta+\epsilon))} \<br>\mathbb{P}[Y&#x3D;y] &#x3D; P^y(1-P)^{1-y},\ P &#x3D; \frac{1}{1+e^{-X\beta}}\<br>\ell(\beta) &#x3D; \log(f(Y,X;\beta))<br>$$</li>
</ol>
</li>
<li><p>在一定条件下，连续数据的最小二乘估计也是极大似然估计</p>
</li>
</ol>
<h3 id="定序回归"><a href="#定序回归" class="headerlink" title="定序回归"></a>定序回归</h3><ol>
<li>顺序很重要</li>
<li>不能做任何代数运算，没有数值意义</li>
</ol>
<p>存在自然合理的方法将原始的顺序数据0-1化，但是大多数情况下，这样的法则不存在。</p>
<p><strong>潜变量Latent Variable</strong>方法：GPA算法（百分制成绩-&gt;等第）</p>
<ol>
<li>Probit定序回归，如果残差是正态分布</li>
<li>Logit定序回归：残差是逻辑分布</li>
</ol>
<p>分为数回归，最大似然估计，极限正太，p-value</p>
<h3 id="泊松回归"><a href="#泊松回归" class="headerlink" title="泊松回归"></a>泊松回归</h3><p>计数型数据</p>
<ol>
<li><p>什么是计数型数据？为什么很重要？<br>非负的整数数据｜RFM，社交平台每天多少原创转发</p>
</li>
<li><p>有哪些常见的概率分布可以用来建模？为什么泊松分布脱颖而出？<br>没有上界又可以描述计数型数据的分布：几何，负二项，泊松</p>
<ol>
<li>几何分布：多少次后出现第一个1</li>
<li>负二项分布：多少次后出现k个1</li>
<li>泊松分布：间隔时间服从指数分布｜排队论<br>简单可加性</li>
</ol>
</li>
<li><p>如何建立Y和X的关系？<br>未知参数$\lambda$<br>$$<br>\mathbb{P}[Y&#x3D;k] &#x3D; \frac{\lambda^k}{k!}e^{-\lambda},\ \log\lambda &#x3D; \beta_0+X\beta<br>$$</p>
</li>
</ol>
<p>All models are wrong, but some are useful.</p>
<p>Zero Inflated Poisson (ZIP)</p>
<h3 id="生存回归"><a href="#生存回归" class="headerlink" title="生存回归"></a>生存回归</h3><ol>
<li>什么是生存数据？为什么生存数据很独特？<br>关于某个个体生存时间的数据（死亡时间-出生时间）<br>清晰的定义出生和死亡，生存数据一定是连续的正数<br>生存数据普遍存在的问题：截断 Censoring，删失</li>
<li>生存数据应该如何描述性分析？其背后的核心假设是什么？<br>一般分位数依然能准确估计，均值和方差无法估计<ol>
<li>Kaplan-Meier估计量</li>
</ol>
</li>
<li>AFT模型和COX模型<ol>
<li>Accelerated Failure Time 对数线性模型<br>对数生存时间的普通线性回归模型，估计方法最小二乘不再适用<br>采用MLE估计系数<br>假设残差服从中心化的指数分布，威布尔分布</li>
<li>COX模型<br>建立X和Hazard（风险）之间的关系<br>风险h(t)是关于时间的正函数，刻画的事给定个体生存到了t时刻的前提，然后该个体在接下来的无限小时间区间瞬时死亡的概率。</li>
</ol>
</li>
</ol>
<h3 id="预测精度"><a href="#预测精度" class="headerlink" title="预测精度"></a>预测精度</h3><p>对于实际数据分析，判别系数要多大才算好？</p>
<ul>
<li>业务需求：如果可以满足业务需求，精度就有意义<ul>
<li>量化投资：外样本中的$R^2$1%就足够，实际中会出现负数</li>
<li>互联网征信：结合实际的放贷与赖账情形</li>
</ul>
</li>
<li>对比标杆：良好定义的对比标杆，如何确立？<ul>
<li>当前情况</li>
<li>竞争对手</li>
</ul>
</li>
</ul>
<h3 id="关于-R-2"><a href="#关于-R-2" class="headerlink" title="关于$R^2$"></a>关于$R^2$</h3><p>$$<br>Y &#x3D; X’ \beta+\epsilon \<br>R^2 &#x3D; \frac{\text{Y的信息被X解释的部分}}{\text{Y的信息}} \<br> &#x3D; \frac{\text{Y的信息被X解释的部分}}{\text{Y的信息被X解释的部分+Y的信息【没有】被X解释的部分}}<br>$$</p>
<p>进一步，<br>$$<br>R^2 &#x3D; \frac{\mathbb{var}(X’\beta)}{\mathbb{var}(Y)}<br>&#x3D; \frac{\mathbb{var}(X’\beta)}{\mathbb{var}(X’\beta) +\mathbb{var}(\epsilon)}<br>$$<br>理解：$R^2$为0一般说明$\beta$为0，也就是解释变量和X没有毛关系；若为1，则Y与X是确定的线性关系（以概率为1）。</p>
<p>残差平方和：$RSS &#x3D; \sum(Y_i - X_i’\beta)^2$</p>
<p>总平方和：$SST &#x3D; \sum(Y_i - \bar{Y})^2 \Rightarrow R^2 &#x3D; 1 - \frac{RSS}{SST}$<br>$$<br>\begin{aligned}<br>R^2 &amp;&#x3D; 1- \frac{RSS&#x2F;n}{SST&#x2F;n} \<br>&amp;&#x3D;\frac{\widehat{\mathbb{var} }(Y)- \widehat{\mathbb{var}}(\epsilon)}{\widehat{\mathbb{var}}(Y)} \<br>&amp;\approx \frac{\operatorname{var}(X’\beta)}{\operatorname{var}(Y)}<br>\end{aligned}<br>$$<br>🌟经典的$R^2$在计算残差平方和时用的样本与最想二乘估计时一样，于是$R^2$倾向于鼓励过度拟合，于是一半被称为“内样本”$R^2$,RSS的计算方法时in-sample的。外样本out-sample的定义为：<br>$$<br>\text{out-sample }R^2 &#x3D; 1- \frac{RSS^*}{SST^*}<br>$$<br>RSS和SST的定义不变，只是将内样本$S_0 &#x3D; {(X_i,Y_i)}$换成外样本$S_1 &#x3D; {(X^*_j,Y^*_j)}.$</p>
<p>外样本方法不会鼓励过拟合，不断加变量进去只会使内样本不停改进，但外样本甚至会产生负数。<br>$$<br>\text{adjusted }R^2 &#x3D; 1-\frac{(1-R^2)(n-1)}{n-k-1}<br>$$</p>
<h3 id="p-Value"><a href="#p-Value" class="headerlink" title="p.Value"></a>p.Value</h3><p>p.Value显著(小)只能说明变量系数不为0，并不能说明变量更重要，与变量系数的大小并没有关系！</p>
<blockquote>
<p>p.Value是用来做什么的？p.Value是用来判断一个beta系数为0的可能性。p.Value越小，说明这个beta系数越不可能是0，而同beta系数绝对值的大小（也就是：重要性），没有必然联系。</p>
<p>具体而言，对于一个回归分析，p.Value是通过一个Z-type检验统计量来计算的，形式为：Z＝beta.hat&#x2F;SE(beta.hat)，其中beta.hat表示某种估计量（例如：最小二乘估计），而SE(beta.hat)表示该统计量相应的估计误差。Z的绝对值越大，p.Value越小。Z的绝对值越小，p.Value越大。因此，p.Value的显著性同Z的绝对值是一一确定的关系。</p>
</blockquote>
<h3 id="标准误差"><a href="#标准误差" class="headerlink" title="标准误差"></a>标准误差</h3><blockquote>
<p>什么样的基金经理最会赚钱？</p>
</blockquote>
<p>样本量与可信度，样本平衡？</p>
<ul>
<li><p>标准误差Standard Error, SE</p>
</li>
<li><p>无偏性保证了样本估计量不会<code>系统性</code>高估或者低估总体统计量，但是不代表估计是准确的，样本均值会围绕着总体均值随机波动</p>
</li>
<li><p>测量样本均值的波动程度<br>$$<br>\operatorname{SE} &#x3D; \frac{\operatorname{SD}}{\sqrt{n}}<br>$$<br>建立了统计量估计误差（总体标准差&amp;样本量）</p>
<ol>
<li>样本量越大，估计量越准，波动程度越小</li>
<li>同样两个样本，样本量相同，但是来自不同的总体，则哪个总体趋势趋同（SD更小），则相应的样本均值作为估计更加准确。<ol>
<li>总体1和总体2，每个总体内部的方差不一样，那么为了得到总体估计量的准确估计，内部方差大的总体相应的需要更大的样本量</li>
</ol>
</li>
</ol>
</li>
<li><p>样本少，标准误差大，则区间估计时区间长度相应大（牺牲精度弥补准确度）</p>
</li>
</ul>
<h3 id="模型诊断"><a href="#模型诊断" class="headerlink" title="模型诊断"></a>模型诊断</h3><p>残差图</p>
<p>Cook距离：剔除样本后重新最小二乘估计，如果被提出的样本没有捣鬼，则剔除前后的结果基本一致<br>$$<br>D_i&#x3D; \frac{(\hat{\beta}<em>{(i)} - \hat{\beta})^{‘}(X’X)(\hat{\beta}</em>{(i)} - \hat{\beta})}{(p+1)\hat{\sigma}^2}<br>$$<br>方差膨胀因子VIF：检测多重共线性<br>$$<br>X_j &#x3D; \alpha + \sum_{j’ \neq j}\beta_{j’}X_{j’}+\epsilon \<br>VIF_j &#x3D; \frac{1}{1-R^2_j}<br>$$</p>
<h3 id="模型选择"><a href="#模型选择" class="headerlink" title="模型选择"></a>模型选择</h3><p>基本思想：给模型打分，得分最低的获胜 -&gt; 各种信息准则Information Criterion</p>
<p>​	AIC,BIC</p>
<p>最优模型：tradeoff between 拟合优度&amp;模型复杂度</p>
<p>模型选择中的两种不同的信仰：</p>
<ol>
<li>损失有效性 Loss Efficiency<ol>
<li>真模型永远把握不了，只能近似真模型</li>
<li>AIC，AICc，Leaving-out-one CV</li>
</ol>
</li>
<li>选择相合性 Selection consistency<ol>
<li>相信真模型就在待选模型中，在大样本情况下把真模型选出来</li>
<li>BIC，RIC</li>
</ol>
</li>
</ol>
<p>模型选择中的计算问题：curse of dimensions</p>
<ol>
<li>前进选择方法：不具备选择相合性，但是具备筛选一致性</li>
<li>后退选择方法</li>
</ol>
<p>求解路径Solution Path👇Generator</p>
<p>收缩估计方法：LASSO，SCAD，Adaptive LASSO，LARS，DS</p>
<p>Model Averaging和Model Mixing方法，Bayesian Model Averaging (BMA)</p>
<h1 id="假设检验"><a href="#假设检验" class="headerlink" title="假设检验"></a>假设检验</h1><h1 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h1><p>weighted</p>
<h1 id="精度准则"><a href="#精度准则" class="headerlink" title="精度准则"></a>精度准则</h1><h1 id="样本平衡"><a href="#样本平衡" class="headerlink" title="样本平衡"></a>样本平衡</h1><ol>
<li><p>样本数据中正例样本量太少，逻辑回归的结果还可靠吗？</p>
<blockquote>
<p>可靠的标准？</p>
<ul>
<li>标准1:数据生成模型正确（数据的生成机制），过于苛刻，all models are wrong！     [线性回归 or Probit or Logit]</li>
<li>标准2:参数估计方法正确，多大的误差才算大？<br>静态考察难以判断优劣，动态考察相合性（consistent，样本量趋于无穷大）</li>
</ul>
</blockquote>
<p>相合性 - 假设样本量趋于无限大</p>
<p>模型是否可靠 -&gt; 能否解决业务问题，是否有用比较重要！</p>
<blockquote>
<p>在实际中经常使用的方案是用1:1抽样正负例，然后再做系数调整。如果我们以AUC 评判模型结果，那直接不进行抽样的建模，以及按照抽样1:1的建模会有影响吗？逻辑回归有无限的话题</p>
</blockquote>
</li>
<li><blockquote>
<p>请大家注意，我并不是反对后面这种正负样本比例1：1配比的方案。事实上，我自己就经常这样干。但是，我想告诉大家，这是一个退而求其次的方案，绝不是一个值得炫耀的方案，更不能成为“教科书”似的金标准。把这个方案看作“教科书似的正确方案”的朋友，你们已经忘记了数据分析的目的是什么。这是熊大说过八百遍的碎碎念：<strong>数据分析的目标不是分析数据，是创造业务价值</strong>。只有从业务价值这个角度，才能彻底看清楚，正负样本比例失衡的根本所在。</p>
</blockquote>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/01/21/%E5%9B%9E%E5%BD%92%E4%B8%8E%E7%BB%9F%E8%AE%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" data-id="cld5jnvo20000u79fhnx897cz" data-title="回归与统计基础知识" class="article-share-link">Compartir</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/01/19/new/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Viejo</strong>
      <div class="article-nav-title">new</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorías</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archivos</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Posts recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/21/%E5%9B%9E%E5%BD%92%E4%B8%8E%E7%BB%9F%E8%AE%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">回归与统计基础知识</a>
          </li>
        
          <li>
            <a href="/2023/01/19/new/">new</a>
          </li>
        
          <li>
            <a href="/2023/01/19/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/">日常随记</a>
          </li>
        
          <li>
            <a href="/2023/01/18/%E8%A5%BF%E6%96%B9%E7%8E%B0%E4%BB%A3%E6%80%9D%E6%83%B3%E8%AE%B2%E4%B9%89%E7%AC%94%E8%AE%B0-1/">西方现代思想讲义笔记</a>
          </li>
        
          <li>
            <a href="/2023/01/18/helloworld/">helloworld</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Chuntao Tao<br>
      Construido por <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>